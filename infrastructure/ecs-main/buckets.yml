Resources:
  DocsBucket:
    Type: "AWS::S3::Bucket"
    Properties:
      AccessControl: PublicRead
      BucketName: ${self:custom.bucketName}
      WebsiteConfiguration:
          IndexDocument: index.html
  DocAtlasBucket:
    Type: "AWS::S3::Bucket"
    Properties:
      AccessControl: PublicRead
      BucketName: ${self:custom.atlastBucketName}
      WebsiteConfiguration:
          IndexDocument: index.html
  DocAtlasOsbBucket:
    Type: "AWS::S3::Bucket"
    Properties:
      AccessControl: PublicRead
      BucketName: ${self:custom.atlasOsbBucketName}
      WebsiteConfiguration:
          IndexDocument: index.html
  DocAtlasGovBucket:
    Type: "AWS::S3::Bucket"
    Properties:
      AccessControl: PublicRead
      BucketName: ${self:custom.atlasGovBucketName}
      WebsiteConfiguration:
          IndexDocument: index.html
  DevhubBucket:
    Type: "AWS::S3::Bucket"
    Properties:
      AccessControl: PublicRead
      BucketName: ${self:custom.devhubBucketName}
      WebsiteConfiguration:
          IndexDocument: index.html
  NewDevhubBucket:
    Type: "AWS::S3::Bucket"
    Properties:
      AccessControl: PublicRead
      BucketName: developer-hub-prod
      WebsiteConfiguration:
          IndexDocument: index.html

  CloudManagerBucket:
    Type: "AWS::S3::Bucket"
    Properties:
      AccessControl: PublicRead
      BucketName: ${self:custom.cloudManagerBucketName}
      WebsiteConfiguration:
          IndexDocument: index.html

  opsManagerBucket:
    Type: "AWS::S3::Bucket"
    Properties:
      AccessControl: PublicRead
      BucketName: ${self:custom.opsManagerBucketName}
      WebsiteConfiguration:
          IndexDocument: index.html

  DocsBucketPolicy:
    Type: AWS::S3::BucketPolicy
    Properties:
      Bucket:
        Ref: DocsBucket
      PolicyDocument:
        Statement:
          - Sid: PublicReadGetObject
            Effect: Allow
            Principal: "*"
            Action:
              - s3:GetObject
            Resources: [
              Fn::Join: [
                "", [
                    "arn:aws:s3:::",
                    {
                      "Ref": "DocsBucket"
                    },
                    "/*"
                  ]
              ],
              Fn::Join: [
                "", [
                    "arn:aws:s3:::",
                    {
                      "Ref": "DocAtlasBucket"
                    },
                    "/*"
                  ]
              ], 
              Fn::Join: [
                "", [
                    "arn:aws:s3:::",
                    {
                      "Ref": "DocAtlasOsbBucket"
                    },
                    "/*"
                  ]
              ], 
              Fn::Join: [
                "", [
                    "arn:aws:s3:::",
                    {
                      "Ref": "DocAtlasGovBucket"
                    },
                    "/*"
                  ]
              ], 
              Fn::Join: [
                "", [
                    "arn:aws:s3:::",
                    {
                      "Ref": "DevhubBucket"
                    },
                    "/*"
                  ]
              ], 
              Fn::Join: [
                "", [
                    "arn:aws:s3:::",
                    {
                      "Ref": "NewDevhubBucket"
                    },
                    "/*"
                  ]
              ], 
              Fn::Join: [
                "", [
                    "arn:aws:s3:::",
                    {
                      "Ref": "CloudManagerBucket"
                    },
                    "/*"
                  ]
              ], 
              Fn::Join: [
                "", [
                    "arn:aws:s3:::",
                    {
                      "Ref": "opsManagerBucket"
                    },
                    "/*"
                  ]
              ]]
